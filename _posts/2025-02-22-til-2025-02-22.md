---
layout: single
title: 2025-02-22 TIL
categories: TIL
tag: [Today I Learned]
toc: true
toc_sticky: true
author_profile: false
sidebar:
    nav: "docs"
search: true
sidebar:
    nav: "counts"
typora-root-url: ../
---

## 📌 2025-02-22 TIL

## 1. 오늘의 학습 주제

viewResolver의 개념을 알아보자



## 2. 오늘의 학습정리

### 뷰 리졸버란

+ 뷰 리졸버는 스프링 mvc에서 뷰 이름을 뷰 객체로 **매핑해주는 역할을 하는 뷰 렌더링 빈**입니다.
+ 사용자가 URL 요청을 보내면, 컨트롤러는 뷰 이름만 반환하고, 뷰 리졸버는 해당 이름에 맞는 경로와 확장자를 붙여 실제 뷰를 렌더링합니다.
+ 컨트롤러는 뷰의 경로 및 구현 기술에 의존하지 않게 되며, 유연하고 확장 가능한 설계가 가능합니다.

> 뷰의 경로 "user/static/intex.html" 나 클래스의 경로나 클라이언트가 모두 알고 있으면 강한 결합이 발생한다고 생각합니다.

### 뷰 리졸버를 사용할까?

### 의존성의 분리와 유지보성

+ 뷰 리졸버는 컨트롤러와 뷰의 강한 결합을 방지하고 느슨한 결합을 가능하게 만듭니다.
+ 예를 들어, 컨트롤러는 뷰의 경로나 확장자를 알 필요가 없습니다.
+ 이는 설정파일이나 빈 설정을 뷰의 이름으로 뷰를 교체할 수 있어 유지보수성이 높아진다.
+ Spring의 ioc/di 철학에 따라, 뷰의 생성과 관리는 컨트롤러(사용하는 클라이언트)가 아니라 스트링 컨테이너가 담당한다.



### 동작원리

1. 컨트롤러가의 뷰 이름을 반환합니다. `return "index";

2. 뷰 리졸버가 이름을 해석합니다.

   이때 뷰 리졸버 후보리스트에서 `resolveName` 를 호출하여 지원하는 뷰 리졸버를 조회합니다

3. 실제 뷰 렌덩: 생성된 경로를 통해 뷰 객체를 렌더링.



### 구현체

#### **InternalResourceViewResolver**

+ jsp와 같은 서버 사이드 렌더링 뷰에 사용한다.
+ redirect:, forward: 가 붙은 경우 동작한다.

#### **ThymeleafViewResolver**

+ 타임리프 템플릿 엔진을 사용하는 뷰 렌더일입니다.
+ 서버사이드 렌더링에 포함되며, boot에서 기본적으로 사용된다.

### **JsonViewResolver**

+ **RESTful API** 개발에서 주로 사용되며, **JSON 응답**을 반환
+ @ResponseBody와 유사하지만 **구체적인 뷰 객체를 사용**할 수 있다는 점에서 차이가 있음.

### **뷰 리졸버 사용의 장점**

1. **유지보수성**: 뷰 엔진 교체 시 컨트롤러 코드를 수정하지 않아도 됨.
1. **유연한 설계**: 설정 파일만 수정해서 뷰 변경 가능
1. **의존성 분리**: 컨트롤러는 뷰의 세부 구현을 몰라도 됨.

### **뷰 리졸버 사용의 단점**

1. 설정 복잡도**: 여러 뷰 리졸버를 사용할 때 **우선순위 관리가 복잡.
1. **디버깅 어려움**: 뷰 매핑이 잘못될 경우 디버깅이 복잡해질 수 있음
1. **JSON 응답의 한계**: 최근 트렌드인 SPA 프레임워크(Vue, React)와는 JsonViewResolver보다 @ResponseBody가 더 자주 사용됨.



### **대안과의 비교**

#### @ResponseBody 및 @RestController:

+ **장점:** JSON 응답을 직접 반환하며 뷰 리졸버를 우회.
+ **단점:** 컨트롤러가 JSON 구조에 직접 의존하게 됨.

> json 구조에 의존한다는 이야기
>
> 응답 포멧을 변경하고 싶다면 컨트롤러 코드를 직접 수정해야한다.
>
> 하지만 view 리졸버를 사용하면 요청 헤더에 따라 다양한 응답 포멧을 지정할 수 있다.


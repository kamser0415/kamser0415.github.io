---
layout: single
title: TIL) ì˜ˆì™¸ê°€ ë°œìƒë˜ë©´ wasëŠ” ìƒˆ ê°ì²´ë¥¼ ë§Œë“¤ê¹Œ
categories: TIL
tag: [Today I Learned]
toc: true
toc_sticky: true
author_profile: false
sidebar:
    nav: "docs"
search: true
sidebar:
    nav: "counts"
typora-root-url: ../
---

## ğŸ“Œ 2025-04-03 TIL

## ì˜¤ëŠ˜ì˜ í•™ìŠµ ì£¼ì œ
- í•„í„°ì™€ ì¸í„°ì…‰í„°ì— ëŒ€í•´ì„œ ì¶”ê°€ í•™ìŠµì„ í•´ë³´ì

## í•™ìŠµ ë‚´ìš©

> ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ wasëŠ” DispatcherTypeì„ REQUESTë¥¼ ERRORë¡œ ë³€ê²½í•œë‹¤.
>
> ì´ë•Œ wasëŠ” new Request() ì™€ new Response()ë¥¼ ë§Œë“¤ê¹Œ?

### ë§Œë“¤ì§€ ì•ŠìŠµë‹ˆë‹¤.

ì²˜ìŒ ì‚¬ìš©ìì˜ ìš”ì²­ìœ¼ë¡œ ë§Œë“  í´ë˜ìŠ¤ëŠ” `RequestFacade@4f40aa66` ì…ë‹ˆë‹¤.

```java
// org.apache.catalina.connector.RequestFacade@4f40aa66
```

WASì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒí•˜ë©´ ê¸°ì¡´ `RequestFacade`ë¥¼ ë§¤í•‘í•©ë‹ˆë‹¤.

```java
class ApplicationHttpRequest extends HttpServletRequestWrapped
```

ê¸°ì¡´ ì •ë³´ë¥¼ ê°ì‹¸ê³  ìˆëŠ” êµ¬ì¡° ì´ë¯€ë¡œ ê¸°ì¡´ ì •ë³´ë¥¼ ì¡°íšŒí•˜ë ¤ë©´ êº¼ë‚´ì•¼ í•©ë‹ˆë‹¤

```jva
if (httpRequest.getDispatcherType() == DispatcherType.ERROR){
  HttpServletRequestWrapper httpRequest1 = (HttpServletRequestWrapper)httpRequest;
  ServletRequest request1 = httpRequest1.getRequest();
  Object count1 = request1.getAttribute("count");

  log.info("ë‚´ê°€ ì°¾ëŠ” ê²ƒ ={}", request1);
  log.info("count1={}", count1);

} 
```

ê·¸ëŸ¬ë©´ ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. 

ê·¸ëŸ°ë° ì™œ `getAttribue()`ë¥¼ í˜¸ì¶œí•˜ë©´ ì›ë³¸ ê°ì²´ì˜ attribute ì—ì„œ ì˜ˆì™¸ê°€ ë°œìƒëœ ì§€ê¸ˆì´ë‚˜ ê¸°íƒ€ ì‚¬í•­ì„ í™•ì¸í•  ìˆìŠµë‹ˆë‹¤.

#### ì„œë¡œ ì›ë³¸ ê°ì²´ê°€ ë‹¤ë¥´ë‹¤.

DispatcherType == 'REQUEST' ì¼ ë•Œì— getAttribue()ëŠ” ì‚¬ìš©ì ìš”ì²­ì˜ ì‹¤ì œ ê°ì²´ì…ë‹ˆë‹¤.

DispatcherType == 'ERROR' ì¼ ë•Œì— getAttribue()ëŠ” ë˜í¼ ê°ì²´ë¥¼ ê°ì‹¸ê³  ìˆìŠµë‹ˆë‹¤.

ì¦‰, `ApplicationHttpRequest(RequestFacade(Object))` êµ¬ì¡°ë¼ê³  ìƒê°í•˜ì‹œë©´ ë©ë‹ˆë‹¤.



 
